<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>LG 6 MAP</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Local styles -->
  <link rel="stylesheet" href="/style.css">
  <!-- toGeoJSON (KML fallback) -->
  <script src="https://cdn.jsdelivr.net/npm/togeojson@0.16.0/dist/togeojson.umd.js"></script>
  <!-- config.js injected by build (contains window.__MAPS_API_KEY) -->
  <script src="/config.js"></script>
</head>
<body>
  <header class="appbar">
    <h1>LG 6 MAP</h1>
    <div class="actions">
      <button id="openHistoryMobile" class="hamburger d-md-none" title="History (mobile)">‚ò∞</button>
    </div>
  </header>

  <main class="page">
    <!-- Map card (floating box) -->
    <div class="map-card" role="region" aria-label="Map container">
      <!-- toolbar above map-card (not overlaying map) -->
      <div id="drawToolbar" class="draw-toolbar collapsed" aria-label="Drawing toolbar">
        <button id="btnToggleDraw" class="tb-icon" title="Open drawing tools">‚úèÔ∏è</button>
        <div id="toolbarControls" class="tb-controls" aria-hidden="true">
          <div class="ctrl">
            <label class="lbl">Color</label>
            <select id="tbColor" class="sel">
              <option value="#ff0000" selected>Red</option>
              <option value="#007bff">Blue</option>
              <option value="#16a34a">Green</option>
              <option value="#ffff00">Yellow</option>
              <option value="#ffffff">White</option>
              <option value="#000000">Black</option>
            </select>
          </div>

          <div class="ctrl">
            <label class="lbl">Size</label>
            <select id="tbSize" class="sel">
              <option value="3">3 px</option>
              <option value="5" selected>5 px</option>
              <option value="10">10 px</option>
            </select>
          </div>

          <button id="btnUndo" class="small">‚Ü∂</button>
          <button id="btnEraseMode" class="small" title="Toggle erase mode">ü©π</button>
          <button id="btnEraseAll" class="small danger" title="Erase all drawings">üóëÔ∏è</button>
          <button id="btnSaveDraw" class="small" title="Save drawings">üíæ</button>
        </div>
      </div>

      <!-- actual map -->
      <div id="map"></div>
    </div>

    <!-- history panel (desktop) -->
    <aside class="history-panel d-none d-md-block" id="historyPanelDesktop" aria-label="History Panel">
      <h4 style="margin-top:4px">History & Logs</h4>
      <p class="muted" style="margin-bottom:10px">Saved marker changes are shown here (click to review).</p>
      <div id="historyList"></div>
      <div style="margin-top:12px">
        <button id="resetAll" class="btn btn-outline-secondary w-100">Reset All Saved</button>
      </div>
    </aside>
  </main>

  <!-- mobile history offcanvas -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="mobileHistory" aria-labelledby="mobileHistoryLabel">
    <div class="offcanvas-header">
      <h5 id="mobileHistoryLabel">History</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div id="historyListMobile"></div>
      <div class="mt-3">
        <button id="resetAllMobile" class="btn btn-outline-secondary w-100">Reset All Saved</button>
      </div>
    </div>
  </div>

  <!-- bootstrap bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- main app logic -->
  <script src="/main.js"></script>
</body>
</html>
